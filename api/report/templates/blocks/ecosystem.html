<div class="ecosystem">

<div class="ecosystem-header flex align-center space-between">
    <div class="flex align-center flex-grow">
        <img src="{{(ecosystem.id + '.svg')|load_asset}}" alt="Icon for {{ecosystem.label}}"/>
        <h2>
            <span id="{{ecosystem.id}}">{{ecosystem.label}}</span>{% if ecosystem.acres %}: {{(100 * ecosystem.acres / results.blueprint_total)|format_number}}% of area{% endif %}
        </h2>
    </div>
    {% if ecosystem.acres %}
        <div class="flex-no-shrink">{{ecosystem.acres|format_number}} acres</div>
    {% endif %}
</div>

<!-- <div id="{{ecosystem.id}}" class="hidden">{{ecosystem.label}}</div> -->

<p>{{ecosystem.description}}</p>

<div class="no-break">

    {% with number=table.counter,label="Extent of each indicator in " + (ecosystem.label|lower) + '.  Not all indicators have a good condition threshold defined.' %}
        {% include "elements/table_caption.html" %}
    {% endwith %}
    {% set table.counter=table.counter+1 %}

    <table class="centered">
        <thead>
            <tr>
                <th class="label">Indicator</th>
                <th class="acres">Total Acres in Good Condition</th>
                <th class="acres">Total Acres</th>
                <th class="percent">Percent of Area</th>
            </tr>
        </thead>
        <tbody>
            {% for indicator_id in ecosystem.indicators %}
                {% with indicator_id=ecosystem.id + "_" + indicator_id %}
                    {% if indicator_id in results.indicators %}
                        {% with indicator=indicators[indicator_id],acres=results[indicator_id + '_total'] %}
                        <tr>
                            <td class="label">{{indicator.label}}</td>
                            <td class="acres">
                                {% if indicator_id + '_good_total' in results %}
                                    {{results[indicator_id + '_good_total']|format_number}}
                                {% else %}
                                    n/a
                                {% endif %}
                            </td>
                            <td class="acres">{{acres|format_number}}</td>
                            <td class="percent">{{(100 * acres / results.blueprint_total)|format_number}}%</td>
                        </tr>
                        {% endwith %}
                    {% endif %}
                {% endwith %}
            {% endfor %}
        </tbody>
    </table>
</div>


{% for indicator_id in ecosystem.indicators %}
    {% with indicator_id=ecosystem.id + "_" + indicator_id %}
        {% if indicator_id in results.indicators %}
            {% with indicator=indicators[indicator_id] %}
                {% include "blocks/indicator.html" %}
            {% endwith %}
        {% endif %}
    {% endwith %}
{% endfor %}

</div>