<section>
    <h2 id="Blueprint">Blueprint Priorities</h2>

    {% if maps.blueprint %}
        <img src="data:image/png;base64,{{maps.blueprint}}" alt="Conservation Blueprint map" class="map">
    {% else %}
        <div class="map-placeholder text-center">
            map could not be created
        </div>
    {% endif %}

    <div class="flex">
        <div class="map-locator-container">
            {% if maps.locator %}
                <img src="data:image/png;base64,{{maps.locator}}" alt="Locator map" class="map-locator">
            {% else %}
                <div class="map-locator-placeholder text-center">
                    map could not be created
                </div>
            {% endif %}
        </div>

        <div class="legend">
            {% for item in blueprint[:0:-1] %}
                <div class="legend-element flex align-center">
                    <div class="legend-patch" style="background: {{item.color}}"></div>
                    <div>{{item.label}}</div>
                </div>
            {% endfor %}
        </div>
    </div>
</section>

<section>
    <h2>Priority Categories</h2>
    {% for item in blueprint[:0:-1] %}
        <h4>
            {{item.label}}
            {% if 'priority' in item.label %}
            for conservation action
            {% endif %}
        </h4>
        <p>
            {{item.description}}
            {{item.report_description}}
        </p>
    {% endfor %}

<div class="spacer"></div>

<!-- TODO: chart of blueprint results?
or just a donut chart of the highest priority?
-->

{% with number=1,label="Extent of each Blueprint priority category" %}
    {% include "elements/table_caption.html" %}
{% endwith %}

<table class="centered">
    <thead>
        <tr>
            <th>Priority Category</th>
            <th>Acres</th>
            <th>Percent of Area</th>
        </tr>
    </thead>
    <tbody>
        {% with acres=results.blueprint[::-1] %}
        {% for item in blueprint[::-1] %}
        <tr>
            <td>{{item.label}}</td>
            <td>{{acres[loop.index-1]|format_number}}</td>
            <td>{{(100 * acres[loop.index-1] / results.blueprint_acres)|format_number}}%</td>
        </tr>
        {% endfor %}
        {% endwith %}
    </tbody>
</table>


</section>